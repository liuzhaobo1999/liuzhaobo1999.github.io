const domApp=document.querySelector(".app"),domTime=document.querySelector(".time"),domDate=document.querySelector(".date"),domCnDate=document.querySelector(".cn-date");function geturl(url){const arr=url.split("?");if(!arr[1])return{};const res=arr[1].split("&"),items={};for(let i=0;i<res.length;i++){const a=res[i].split("=");items[a[0]]=a[1]}return items}function formatDate(date,fmt="yyyy-MM-dd"){if(!date)return"";"number"!=typeof date&&"string"!=typeof date||(date=new Date(Number(date)));const o={"M+":date.getMonth()+1,"d+":date.getDate(),"h+":date.getHours(),"m+":date.getMinutes(),"s+":date.getSeconds(),"q+":Math.floor((date.getMonth()+3)/3),S:date.getMilliseconds()};/(y+)/.test(fmt)&&(fmt=fmt.replace(RegExp.$1,(""+date.getFullYear()).substr(4-RegExp.$1.length)));for(const k in o)new RegExp(`(${k})`).test(fmt)&&(fmt=fmt.replace(RegExp.$1,1===RegExp.$1.length?o[k]:("00"+o[k]).substr((""+o[k]).length)));return fmt}function render(){const time=new Date,len=time.getTime(),offset=6e4*time.getTimezoneOffset(),utcTime=undefined,date=new Date(len+offset+288e5),lunar=calendar.solar2lunar(date.getUTCFullYear(),date.getUTCMonth()+1,date.getUTCDate()),dateText=`${formatDate(date,"yyyy.M.d")} ${"en"==urlQuery.l?["SUN","MON","TUES","WED","THUR","FRI","SAT"][date.getDay()]:"星期"+["日","一","二","三","四","五","六"][date.getDay()]}`;let minutes=date.getMinutes();const timeText=`${date.getHours()}:${minutes<10?"0"+minutes:minutes}`,cnDateText=`${lunar.IMonthCn}${lunar.IDayCn} ${lunar.Animal}年`;domDate.innerHTML!=dateText&&(domDate.innerHTML=dateText),domTime.innerHTML!=timeText&&(domTime.innerHTML=timeText),domCnDate.innerHTML!=cnDateText&&(domCnDate.innerHTML=cnDateText)}const urlQuery=geturl(location.href),config={fontSize:+(urlQuery.fs||7),rotate:urlQuery.r,lang:urlQuery.l};domTime.style.fontSize=config.fontSize+"rem",domDate.style.fontSize=config.fontSize/2.5+"rem",domCnDate.style.fontSize=config.fontSize/4+"rem",domApp.style.cssText=`-webkit-transform: rotate(${config.rotate||0}deg) translate3d(-50%,-50%,0)`,render(),setInterval(()=>{render()},1e3);